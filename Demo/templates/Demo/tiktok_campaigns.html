{% extends "Demo/base.html" %}

{% block content %}
<div class="container py-4">
  <h2 class="mb-4">TikTok Campaigns</h2>
  <div class="mb-3">
    <a href="{% url 'Demo:tiktok_select_advertiser' %}" class="btn btn-secondary btn-sm">Change Advertiser</a>
  </div>

  <!-- Filter Form -->
  <form method="get" class="mb-4">
    <div class="row">
      <div class="col-md-3">
        <label for="start_date" class="form-label">Start Date</label>
        <input type="date" id="start_date" name="start_date" class="form-control" value="{{ start_date }}">
      </div>
      <div class="col-md-3">
        <label for="end_date" class="form-label">End Date</label>
        <input type="date" id="end_date" name="end_date" class="form-control" value="{{ end_date }}">
      </div>
      <div class="col-md-3">
        <label for="page_size" class="form-label">Page Size</label>
        <input type="number" id="page_size" name="page_size" class="form-control" value="{{ page_size }}" min="1"
          max="100">
      </div>
      <div class="col-md-3">
        <label for="status" class="form-label">Campaign Status</label>
        <select id="status" name="status" class="form-select">
          <option value="CAMPAIGN_STATUS_ENABLE" {% if status_filter == "CAMPAIGN_STATUS_ENABLE" %}selected{% endif %}>
            Enabled</option>
          <option value="CAMPAIGN_STATUS_DISABLE" {% if status_filter == "CAMPAIGN_STATUS_DISABLE" %}selected{% endif %}>
            Disabled</option>
          <option value="CAMPAIGN_STATUS_DELETE" {% if status_filter == "CAMPAIGN_STATUS_DELETE" %}selected{% endif %}>
            Deleted</option>
          <option value="ALL" {% if status_filter == "ALL" %}selected{% endif %}>All</option>
        </select>
      </div>
      <div class="col-md-3 d-flex align-items-end mt-3">
        <button type="submit" class="btn btn-primary w-100">Filter</button>
      </div>
    </div>
  </form>

  {% if campaigns %}
  <div class="data-wrap">
    <div class="data-viewport">
      <div class="data-scroller" role="region" aria-label="Scrollable data table" tabindex="0">
        <table class="data-table" role="table" aria-label="Analytics dataset">
          <thead>
            <tr>
              <th>On/Off</th>
              <th>Campaign Name</th>
              <th>Ad Group Status</th>
              <th>Spend</th>
              <th>Clicks</th>
              <th>Impressions</th>
              <th>Purchases</th>
              <th>Purchases Value</th>
              <th>ROAS</th>
              <th>Cost per Conversion</th>
              <th>Budget</th>
            </tr>
          </thead>
          <tbody>
            {% for campaign in campaigns %}
            <tr>
              <td>
                {% if campaign.campaign_status == 'CAMPAIGN_STATUS_ENABLE' %}
                <button class="btn btn-sm btn-success" disabled>On</button>
                {% else %}
                <button class="btn btn-sm btn-danger" disabled>Off</button>
                {% endif %}
              </td>
              <td>{{ campaign.campaign_name }}</td>
              <td>{{ campaign.status }}</td>
              <td>{{ campaign.spend }}</td>
              <td>{{ campaign.clicks }}</td>
              <td>{{ campaign.impressions }}</td>
              <td>{{ campaign.purchases }}</td>
              <td>{{ campaign.purchases_value }}</td>
              <td>{{ campaign.roas }}</td>
              <td>{{ campaign.cost_per_conversion }}</td>
              <td>{{ campaign.budget }}</td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
  </div>
  {% else %}
  <div class="alert alert-info">No campaigns found.</div>
  {% endif %}
</div>
{% endblock %}